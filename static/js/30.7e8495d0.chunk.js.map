{"version":3,"sources":["pages/Teacher/CreateClass.js","components/Template/Button.js"],"names":["StyledBody","styled","div","Constants","HEADER_HEIGHT","SIDEBAR_WIDTH","StyledTitle","p","StyledButtonContainer","StyledForm","form","StyledInput","input","StyledSubmitButton","Button","COLOR","DARK_GREEN","StyledDashboardButton","LIGHT_GREEN","StyledError","StyledText","CreateClass","history","useHistory","dispatch","useDispatch","errorMessage","setErrorMessage","useState","title","description","id","type","name","required","onClick","data","Object","values","document","forms","classForm","reduce","obj","field","value","classDataDb","add","className","students","modules","then","doc","update","cid","get","doc2","setCurrentClass","userDataDb","auth","currentUser","uid","classList","firebase","firestore","FieldValue","arrayUnion","signIn","push","StyledButton"],"mappings":"iIAAA,iIAeA,MA2FMA,EAAaC,IAAOC,GAAI;gBACdC,IAAUC;iBACTD,IAAUE;;;;;;EAQrBC,EAAcL,IAAOM,CAAE;;;;EAUvBC,GAJkBP,IAAOM,CAAE;;EAIHN,IAAOC,GAAI;;;;;GAOnCO,EAAaR,IAAOS,IAAK;;;;;;;EASzBC,EAAcV,IAAOW,KAAM;;;;;;;EAS3BC,EAAqBZ,YAAOa,IAAQ;;;;;sBAKpBX,IAAUY,MAAMC;;;;;;;;;EAWhCC,EAAwBhB,YAAOa,IAAQ;;;;;sBAKvBX,IAAUY,MAAMG;;;;EAMhCC,EAAclB,IAAOM,CAAE;;;EAKvBa,EAAanB,IAAOM,CAAE;;;;EAMbc,UA9KK,KAClB,MAAMC,EAAUC,cACVC,EAAWC,eACVC,EAAcC,GAAmBC,qBA0DxC,OACE,eAAC,IAAD,CAAMC,MAAO,iBAAkBC,YAAa,iBAA5C,UACE,cAAC,IAAD,IACA,cAAC,IAAD,IACA,cAAC,IAAD,IACA,eAAC9B,EAAD,WACE,cAACM,EAAD,+BACA,eAACG,EAAD,CAAYsB,GAAG,YAAf,UACE,cAACX,EAAD,yBACA,cAACT,EAAD,CAAaqB,KAAK,OAAOC,KAAK,OAAO,YAAU,OAAOC,UAAQ,IAC9D,cAACd,EAAD,gCACA,cAACT,EAAD,CAAaqB,KAAK,OAAOC,KAAK,cAAc,YAAU,gBACtD,cAACd,EAAD,UAAcO,IACd,eAAClB,EAAD,WACE,cAACK,EAAD,CAAoBsB,QAtET,KACnBR,IAGA,MAAMS,EAAOC,OAAOC,OAAOC,SAASC,MAAMC,WAAWC,QACnD,CAACC,EAAKC,KACJD,EAAIC,EAAMX,MAAQW,EAAMC,MACjBF,IAET,IAGmB,KAAjBP,EAAI,KAKRU,IACGC,IAAI,CACHC,UAAWZ,EAAI,KACfN,YAAaM,EAAI,YACjBa,SAAU,GACVC,QAAS,KAEVC,MAAMC,IACLN,IACGM,IAAIA,EAAIrB,IACRsB,OAAO,CAAEC,IAAKF,EAAIrB,KAClBoB,MAAK,KACJL,IACGM,IAAIA,EAAIrB,IACRwB,MACAJ,MAAMK,IACLhC,EAASiC,YAAgBD,EAAKpB,eAGtCsB,IACGN,IAAIO,IAAKC,YAAYC,KACrBR,OAAO,CACNS,UAAWC,IAASC,UAAUC,WAAWC,WAAW,CAClDZ,IAAKF,EAAIrB,GACTiB,UAAWZ,EAAI,SAGlBe,MAAK,KACJO,IACGN,IAAIO,IAAKC,YAAYC,KACrBN,MACAJ,MAAMC,IACL5B,EAAS2C,YAAOf,EAAIhB,YAExBd,EAAQ8C,KAAM,sBAtCpBzC,EAAgB,+BAyDiC,YAAU,SAArD,oBAGA,cAACV,EAAD,CACEkB,QAAS,IAAMb,EAAQ8C,KAAM,gBAC7B,YAAU,OAFZ,6C,gCC7FZ,YAGA,MAAMC,EAHN,MAGqBpE,EAAOC,GAAI;sBACVC,IAAUY,MAAMG;;;;;;;;;;;;EAcvBmD","file":"static/js/30.7e8495d0.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport Main from \"../../layouts/Main\";\nimport SideBar from \"../../components/Template/SideBar\";\nimport Header from \"../../components/Teacher/Header\";\nimport styled from \"styled-components\";\nimport { Constants } from \"../../data/constants\";\nimport Button from \"../../components/Template/Button\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { auth, classDataDb, userDataDb } from \"../../data/firebase\";\nimport firebase from \"firebase\";\nimport { setCurrentClass } from \"../../app/class/actions\";\nimport { signIn } from \"../../app/account/actions\";\nimport Hamburger from \"../../components/Template/Hamburger\";\n\nconst CreateClass = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [errorMessage, setErrorMessage] = useState();\n\n  const handleSubmit = () => {\n    setErrorMessage();\n\n    // get form data\n    const data = Object.values(document.forms.classForm).reduce(\n      (obj, field) => {\n        obj[field.name] = field.value;\n        return obj;\n      },\n      {}\n    );\n    // checks all fields are filled out\n    if (data[\"name\"] === \"\") {\n      setErrorMessage(\"Please fill out class name\");\n      return;\n    }\n    // sends request to create class\n    classDataDb\n      .add({\n        className: data[\"name\"],\n        description: data[\"description\"],\n        students: [],\n        modules: [],\n      })\n      .then((doc) => {\n        classDataDb\n          .doc(doc.id)\n          .update({ cid: doc.id })\n          .then(() => {\n            classDataDb\n              .doc(doc.id)\n              .get()\n              .then((doc2) => {\n                dispatch(setCurrentClass(doc2.data()));\n              });\n          });\n        userDataDb\n          .doc(auth.currentUser.uid)\n          .update({\n            classList: firebase.firestore.FieldValue.arrayUnion({\n              cid: doc.id,\n              className: data[\"name\"],\n            }),\n          })\n          .then(() => {\n            userDataDb\n              .doc(auth.currentUser.uid)\n              .get()\n              .then((doc) => {\n                dispatch(signIn(doc.data()));\n              });\n            history.push(`teacher/home`);\n          });\n      });\n  };\n\n  return (\n    <Main title={\"Create a Class\"} description={\"Create a Class\"}>\n      <SideBar />\n      <Header />\n      <Hamburger />\n      <StyledBody>\n        <StyledTitle>Create New Class</StyledTitle>\n        <StyledForm id=\"classForm\">\n          <StyledText>Class Name</StyledText>\n          <StyledInput type=\"text\" name=\"name\" data-test=\"name\" required />\n          <StyledText>Class Description</StyledText>\n          <StyledInput type=\"text\" name=\"description\" data-test=\"description\" />\n          <StyledError>{errorMessage}</StyledError>\n          <StyledButtonContainer>\n            <StyledSubmitButton onClick={handleSubmit} data-test=\"create\">\n              CREATE\n            </StyledSubmitButton>\n            <StyledDashboardButton\n              onClick={() => history.push(`teacher/home`)}\n              data-test=\"back\"\n            >\n              BACK TO DASHBOARD\n            </StyledDashboardButton>\n          </StyledButtonContainer>\n        </StyledForm>\n      </StyledBody>\n    </Main>\n  );\n};\n\nconst StyledBody = styled.div`\n  margin-top: ${Constants.HEADER_HEIGHT};\n  margin-left: ${Constants.SIDEBAR_WIDTH};\n  padding: 0 50px;\n  @media (max-width: 500px) {\n    margin: 0px 0px;\n    padding: 0 5%;\n  }\n`;\n\nconst StyledTitle = styled.p`\n  line-height: 36px;\n  font-size: 30px;\n  font-weight: 600;\n`;\n\nconst StyledParagraph = styled.p`\n  font-size: 20px;\n`;\n\nconst StyledButtonContainer = styled.div`\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst StyledForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  outline: none;\n  width: 90%;\n  max-width: 600px;\n  margin-top: 60px;\n`;\n\nconst StyledInput = styled.input`\n  border: none;\n  border-bottom: 1px solid black;\n  height: 60px;\n  margin-bottom: 70px;\n  font-size: 30px;\n  outline: none;\n`;\n\nconst StyledSubmitButton = styled(Button)`\n  font-size: 25px;\n  height: 70px;\n  padding: 0 5px;\n  min-width: 120px;\n  background-color: ${Constants.COLOR.DARK_GREEN};\n  &:hover {\n    cursor: pointer;\n  }\n  @media (max-width: 500px) {\n    margin-right: 10px;\n    font-size: 20px;\n    height: 50px;\n  }\n`;\n\nconst StyledDashboardButton = styled(Button)`\n  font-size: 15px;\n  height: 50px;\n  padding: 0 5px;\n  min-width: 120px;\n  background-color: ${Constants.COLOR.LIGHT_GREEN};\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst StyledError = styled.p`\n  color: red;\n  margin-top: -20px;\n`;\n\nconst StyledText = styled.p`\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0;\n`;\n\nexport default CreateClass;\n","import { Constants } from \"../../data/constants\";\nimport styled from \"styled-components\";\n\nconst StyledButton = styled.div`\n  background-color: ${Constants.COLOR.LIGHT_GREEN};\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  color: white;\n  font-weight: bold;\n  &:hover {\n    filter: brightness(110%);\n    cursor: pointer;\n  }\n`;\n\nexport default StyledButton;\n"],"sourceRoot":""}